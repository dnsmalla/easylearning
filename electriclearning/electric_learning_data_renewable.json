{
  "category": "Renewable Energy",
  "categoryId": "renewable",
  "version": "1.0.0",
  "description": "Solar, wind, battery systems, and grid integration",
  "icon": "leaf.fill",
  "color": "#2ECC71",
  "topics": [
    {
      "id": "solar_basics",
      "title": "Solar Energy Basics",
      "symbol": "â˜€ï¸",
      "level": "beginner",
      "definition": {
        "text": "Solar photovoltaic (PV) cells convert sunlight directly into electricity using the photovoltaic effect. When photons hit semiconductor material (usually silicon), they knock electrons free, creating current. Solar panels are arrays of cells wired together to produce useful voltage and power.",
        "keyTerms": ["photovoltaic", "silicon cell", "photon", "irradiance", "insolation", "peak sun hours", "STC rating"]
      },
      "keyFormulas": [
        {
          "id": "pv_power",
          "name": "Solar Panel Power",
          "formula": "P = Î· Ã— A Ã— G",
          "meaning": "Power = efficiency Ã— area Ã— irradiance (W/mÂ²)"
        },
        {
          "id": "energy_output",
          "name": "Daily Energy Output",
          "formula": "E = P_rated Ã— PSH Ã— derating",
          "meaning": "Energy = rated power Ã— peak sun hours Ã— system derating (typically 0.75-0.85)"
        }
      ],
      "examples": [
        {
          "id": "solar_ex1",
          "question": "A 400W panel in an area with 5 peak sun hours. How much energy per day?",
          "steps": [
            {"step": 1, "action": "Apply energy formula", "result": "E = 400W Ã— 5h Ã— 0.8", "explanation": "Using 80% derating factor"},
            {"step": 2, "action": "Calculate", "result": "E = 1600 Wh = 1.6 kWh", "explanation": "Per day output"}
          ],
          "finalAnswer": "1.6 kWh per day (about 48 kWh per month)",
          "difficulty": "easy"
        }
      ],
      "codeExample": {
        "python": "# Solar energy calculator\ndef solar_output(panel_watts, peak_sun_hours, system_losses=0.2, days=30):\n    \"\"\"Calculate solar energy production\"\"\"\n    daily_kwh = panel_watts * peak_sun_hours * (1 - system_losses) / 1000\n    monthly_kwh = daily_kwh * days\n    \n    return {\n        'daily_kwh': daily_kwh,\n        'monthly_kwh': monthly_kwh,\n        'annual_kwh': daily_kwh * 365\n    }\n\n# 6kW system in average US location\nsystem = solar_output(\n    panel_watts=6000,\n    peak_sun_hours=4.5,\n    system_losses=0.15\n)\nprint(f\"Daily: {system['daily_kwh']:.1f} kWh\")\nprint(f\"Monthly: {system['monthly_kwh']:.0f} kWh\")\nprint(f\"Annual: {system['annual_kwh']:.0f} kWh\")",
        "arduino": "// Solar panel monitoring\nconst int voltagePin = A0;\nconst int currentPin = A1;\nconst float voltageScale = 25.0 / 1023;  // 25V max\nconst float currentScale = 10.0 / 1023;  // 10A max\n\nfloat totalEnergy = 0;  // Wh\nunsigned long lastTime;\n\nvoid setup() {\n  Serial.begin(9600);\n  lastTime = millis();\n}\n\nvoid loop() {\n  float voltage = analogRead(voltagePin) * voltageScale;\n  float current = analogRead(currentPin) * currentScale;\n  float power = voltage * current;\n  \n  // Integrate energy\n  unsigned long now = millis();\n  float dt = (now - lastTime) / 3600000.0;  // hours\n  totalEnergy += power * dt;\n  lastTime = now;\n  \n  Serial.print(voltage, 1); Serial.print(\"V \");\n  Serial.print(current, 2); Serial.print(\"A \");\n  Serial.print(power, 1); Serial.print(\"W \");\n  Serial.print(totalEnergy, 1); Serial.println(\"Wh\");\n  \n  delay(1000);\n}"
      },
      "realWorldApplications": [
        {"title": "Rooftop Solar", "description": "Homes generate their own electricity"},
        {"title": "Solar Farms", "description": "Utility-scale power generation"},
        {"title": "Off-Grid Cabins", "description": "Independent power for remote locations"}
      ],
      "tips": [
        "Panel wattage is rated at STC: 1000W/mÂ² irradiance, 25Â°C cell temperature",
        "Real output is typically 75-85% of rated due to temperature, shading, dust",
        "South-facing (Northern Hemisphere) at latitude tilt angle is optimal",
        "Monocrystalline panels are more efficient but more expensive than poly"
      ]
    },
    {
      "id": "pv_systems",
      "title": "PV System Design",
      "symbol": "ðŸ”†",
      "level": "intermediate",
      "definition": {
        "text": "A complete PV system includes solar panels, inverter, mounting, wiring, and often batteries. Grid-tied systems export excess power and import when needed. Off-grid systems require batteries and charge controllers. Hybrid systems combine both approaches for energy independence with grid backup.",
        "keyTerms": ["grid-tied", "off-grid", "hybrid", "string sizing", "MPPT", "net metering", "AC coupling"]
      },
      "keyFormulas": [
        {
          "id": "string_sizing",
          "name": "String Voltage",
          "formula": "V_string = N_panels Ã— V_mp",
          "meaning": "String voltage = number of panels Ã— max power voltage"
        },
        {
          "id": "array_sizing",
          "name": "Array Power",
          "formula": "P_array = N_strings Ã— N_panels/string Ã— P_panel",
          "meaning": "Total array power from multiple strings"
        }
      ],
      "examples": [
        {
          "id": "pv_ex1",
          "question": "Design a string for an inverter with 150-500V input using 400W panels (Vmp=41V, Voc=49V)",
          "steps": [
            {"step": 1, "action": "Calculate min panels for voltage", "result": "N_min = 150V / 41V = 3.7 â†’ 4 panels", "explanation": "Need at least 4 to reach minimum"},
            {"step": 2, "action": "Calculate max panels", "result": "N_max = 500V / 49V = 10.2 â†’ 10 panels", "explanation": "Use Voc for cold temperature safety"},
            {"step": 3, "action": "Choose practical string size", "result": "8-10 panels is optimal", "explanation": "Balances voltage and current"}
          ],
          "finalAnswer": "String of 8-10 panels (328-410V nominal, 3.2-4.0 kW per string)",
          "difficulty": "medium"
        }
      ],
      "codeExample": {
        "python": "# PV System Sizing Calculator\nclass PVSystemDesigner:\n    def __init__(self, daily_kwh_needed, peak_sun_hours, system_losses=0.2):\n        self.daily_kwh = daily_kwh_needed\n        self.psh = peak_sun_hours\n        self.losses = system_losses\n    \n    def size_array(self, panel_watts):\n        # Calculate required array size\n        required_kwh = self.daily_kwh / (1 - self.losses)\n        array_kw = required_kwh / self.psh\n        num_panels = int(array_kw * 1000 / panel_watts) + 1\n        \n        return {\n            'array_kw': array_kw,\n            'num_panels': num_panels,\n            'actual_kw': num_panels * panel_watts / 1000\n        }\n    \n    def size_battery(self, days_autonomy=2, depth_of_discharge=0.8, battery_voltage=48):\n        # For off-grid systems\n        storage_kwh = self.daily_kwh * days_autonomy / depth_of_discharge\n        battery_ah = storage_kwh * 1000 / battery_voltage\n        \n        return {\n            'storage_kwh': storage_kwh,\n            'battery_ah': battery_ah,\n            'battery_voltage': battery_voltage\n        }\n\n# Design for home using 30 kWh/day\ndesigner = PVSystemDesigner(daily_kwh_needed=30, peak_sun_hours=4.5)\narray = designer.size_array(panel_watts=400)\nprint(f\"Need {array['num_panels']} Ã— 400W panels ({array['actual_kw']:.1f} kW)\")\n\nbattery = designer.size_battery(days_autonomy=1)\nprint(f\"Battery: {battery['storage_kwh']:.0f} kWh ({battery['battery_ah']:.0f} Ah @ 48V)\")"
      },
      "realWorldApplications": [
        {"title": "Residential Solar", "description": "5-10kW typical home system"},
        {"title": "Commercial Rooftop", "description": "50-500kW for businesses"},
        {"title": "Utility Scale", "description": "Megawatt solar farms"}
      ],
      "tips": [
        "Match inverter capacity to array size (DC/AC ratio of 1.1-1.3 is typical)",
        "Consider expansion when sizing inverter",
        "Microinverters simplify design but cost more than string inverters",
        "Always follow NEC Article 690 for PV system wiring"
      ]
    },
    {
      "id": "battery_tech",
      "title": "Battery Technology",
      "symbol": "ðŸ”‹",
      "level": "intermediate",
      "definition": {
        "text": "Rechargeable batteries store electrical energy chemically. Lead-acid batteries are mature and affordable but heavy. Lithium-ion offers higher energy density and longer cycle life. Battery capacity is rated in amp-hours (Ah) or kilowatt-hours (kWh). Depth of discharge affects battery lifespan.",
        "keyTerms": ["lithium-ion", "lead-acid", "LiFePO4", "cycle life", "depth of discharge", "C-rate", "state of charge"]
      },
      "keyFormulas": [
        {
          "id": "energy_capacity",
          "name": "Battery Energy",
          "formula": "E (Wh) = V Ã— Ah",
          "meaning": "Energy in watt-hours = voltage Ã— amp-hours"
        },
        {
          "id": "c_rate",
          "name": "C-Rate",
          "formula": "C-rate = I_charge / Capacity",
          "meaning": "Charging at 1C fills battery in 1 hour"
        },
        {
          "id": "runtime",
          "name": "Runtime Estimate",
          "formula": "t = (Ah Ã— DoD Ã— Î·) / I_load",
          "meaning": "Hours = usable capacity / load current"
        }
      ],
      "examples": [
        {
          "id": "bat_ex1",
          "question": "A 48V, 200Ah LiFePO4 battery with 80% DoD powers a 500W load. How long will it last?",
          "steps": [
            {"step": 1, "action": "Calculate usable energy", "result": "E = 48V Ã— 200Ah Ã— 0.8 = 7680 Wh", "explanation": "80% depth of discharge"},
            {"step": 2, "action": "Calculate runtime", "result": "t = 7680Wh / 500W = 15.4 hours", "explanation": "Theoretical maximum"},
            {"step": 3, "action": "Account for inverter losses", "result": "t â‰ˆ 15.4 Ã— 0.9 = 13.8 hours", "explanation": "90% inverter efficiency"}
          ],
          "finalAnswer": "Approximately 14 hours runtime",
          "difficulty": "medium"
        }
      ],
      "codeExample": {
        "python": "class Battery:\n    def __init__(self, voltage, capacity_ah, chemistry='LiFePO4'):\n        self.voltage = voltage\n        self.capacity_ah = capacity_ah\n        self.chemistry = chemistry\n        self.soc = 1.0  # State of charge (0-1)\n        \n        # Chemistry-specific parameters\n        if chemistry == 'LiFePO4':\n            self.max_dod = 0.8\n            self.cycle_life = 3000\n            self.c_rate_max = 1.0\n        elif chemistry == 'Lead-Acid':\n            self.max_dod = 0.5\n            self.cycle_life = 500\n            self.c_rate_max = 0.2\n    \n    @property\n    def energy_kwh(self):\n        return self.voltage * self.capacity_ah / 1000\n    \n    @property\n    def usable_kwh(self):\n        return self.energy_kwh * self.max_dod\n    \n    def discharge(self, power_w, hours):\n        energy_used = power_w * hours / 1000\n        soc_drop = energy_used / self.energy_kwh\n        self.soc = max(1 - self.max_dod, self.soc - soc_drop)\n        return self.soc\n    \n    def runtime(self, power_w):\n        usable = self.energy_kwh * (self.soc - (1 - self.max_dod))\n        return usable * 1000 / power_w  # hours\n\n# Compare battery types\nlifepo4 = Battery(48, 200, 'LiFePO4')\nlead = Battery(48, 200, 'Lead-Acid')\n\nprint(f\"LiFePO4: {lifepo4.usable_kwh:.1f} kWh usable, {lifepo4.cycle_life} cycles\")\nprint(f\"Lead-Acid: {lead.usable_kwh:.1f} kWh usable, {lead.cycle_life} cycles\")"
      },
      "realWorldApplications": [
        {"title": "Home Energy Storage", "description": "Tesla Powerwall, LG RESU for solar storage"},
        {"title": "Electric Vehicles", "description": "Large lithium battery packs"},
        {"title": "UPS Systems", "description": "Lead-acid or lithium backup power"}
      ],
      "tips": [
        "LiFePO4 is safest lithium chemistry - no thermal runaway",
        "Never discharge lead-acid below 50% - dramatically reduces life",
        "Temperature affects capacity - batteries perform worse in extreme cold",
        "Balance charging is critical for lithium cells in series"
      ]
    },
    {
      "id": "grid_integration",
      "title": "Grid Integration",
      "symbol": "ðŸ”Œ",
      "level": "advanced",
      "definition": {
        "text": "Grid integration connects distributed energy resources (solar, wind, batteries) to the utility grid. Inverters must synchronize with grid frequency and voltage. Net metering credits excess generation. Anti-islanding protection disconnects during outages to protect utility workers.",
        "keyTerms": ["net metering", "anti-islanding", "grid-tie inverter", "power quality", "frequency regulation", "demand response"]
      },
      "keyFormulas": [
        {
          "id": "net_metering",
          "name": "Net Metering Credit",
          "formula": "Credit = (E_generated - E_consumed) Ã— rate",
          "meaning": "Monthly bill reduction from excess generation"
        },
        {
          "id": "grid_frequency",
          "name": "Grid Synchronization",
          "formula": "f_inverter = f_grid = 60 Hz (Â±0.5 Hz)",
          "meaning": "Inverter must match grid frequency precisely"
        }
      ],
      "examples": [
        {
          "id": "grid_ex1",
          "question": "A solar system generates 800 kWh/month. Home uses 600 kWh. At $0.12/kWh, what's the bill impact?",
          "steps": [
            {"step": 1, "action": "Calculate net export", "result": "Export = 800 - 600 = 200 kWh", "explanation": "Excess sent to grid"},
            {"step": 2, "action": "Calculate credit", "result": "Credit = 200 Ã— $0.12 = $24", "explanation": "Credited to account"},
            {"step": 3, "action": "Final bill", "result": "Bill = $0 (with $24 credit carryover)", "explanation": "Net metering eliminates bill"}
          ],
          "finalAnswer": "$0 bill with $24 credit (varies by utility rules)",
          "difficulty": "easy"
        }
      ],
      "codeExample": {
        "python": "# Grid-tied solar economics calculator\nclass GridTiedSystem:\n    def __init__(self, system_kw, utility_rate, net_metering_rate=None):\n        self.system_kw = system_kw\n        self.utility_rate = utility_rate\n        self.net_metering_rate = net_metering_rate or utility_rate\n    \n    def monthly_economics(self, generation_kwh, consumption_kwh):\n        if generation_kwh >= consumption_kwh:\n            # Net exporter\n            export = generation_kwh - consumption_kwh\n            bill = 0\n            credit = export * self.net_metering_rate\n        else:\n            # Net importer\n            import_kwh = consumption_kwh - generation_kwh\n            bill = import_kwh * self.utility_rate\n            credit = 0\n        \n        # What bill would have been without solar\n        baseline = consumption_kwh * self.utility_rate\n        savings = baseline - bill + credit\n        \n        return {\n            'bill': bill,\n            'credit': credit,\n            'savings': savings,\n            'baseline': baseline\n        }\n\n# Annual analysis\nsystem = GridTiedSystem(system_kw=6, utility_rate=0.14)\n\nannual_savings = 0\nfor month in range(12):\n    # Seasonal variation\n    gen = 700 + 200 * (1 if 3 <= month <= 8 else -0.5)  # More in summer\n    cons = 650 + 100 * (-1 if 3 <= month <= 8 else 0.5)  # Less AC in winter\n    result = system.monthly_economics(gen, cons)\n    annual_savings += result['savings']\n    \nprint(f\"Annual savings: ${annual_savings:.0f}\")"
      },
      "realWorldApplications": [
        {"title": "Residential Solar", "description": "Homeowners reduce bills with net metering"},
        {"title": "Virtual Power Plants", "description": "Aggregated batteries provide grid services"},
        {"title": "Demand Response", "description": "Reduce consumption during peak demand"}
      ],
      "tips": [
        "Understand your utility's net metering rules - they vary widely",
        "Time-of-use rates can increase solar value if you export during peak",
        "Battery storage enables solar self-consumption when net metering ends",
        "Anti-islanding protection is required - inverters shut down during outages"
      ]
    }
  ]
}

